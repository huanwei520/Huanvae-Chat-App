# Huanvae Chat æ ·å¼æ¶æ„æ–‡æ¡£

## ğŸ“ ç›®å½•ç»“æ„

```
src/styles/
â”œâ”€â”€ index.css              # æ ·å¼å…¥å£æ–‡ä»¶
â”œâ”€â”€ variables.css          # è®¾è®¡ Tokenï¼ˆCSS å˜é‡ï¼‰
â”œâ”€â”€ base.css               # åŸºç¡€å¸ƒå±€ä¸åŠ¨ç”»
â”œâ”€â”€ components/            # å¯å¤ç”¨ç»„ä»¶æ ·å¼
â”‚   â”œâ”€â”€ glass-card.css     # æ¯›ç»ç’ƒå¡ç‰‡
â”‚   â”œâ”€â”€ glass-button.css   # æ¯›ç»ç’ƒæŒ‰é’®
â”‚   â”œâ”€â”€ glass-input.css    # æ¯›ç»ç’ƒè¾“å…¥æ¡†
â”‚   â”œâ”€â”€ wheel-selector.css # è½®ç›˜é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ loading.css        # åŠ è½½çŠ¶æ€
â”‚   â””â”€â”€ toast.css          # æç¤ºæ¶ˆæ¯
â”œâ”€â”€ pages/                 # é¡µé¢ç‰¹å®šæ ·å¼
â”‚   â”œâ”€â”€ auth.css           # è®¤è¯é¡µé¢
â”‚   â””â”€â”€ main.css           # ä¸»é¡µé¢
â”‚
# ç‹¬ç«‹çª—å£æ ·å¼ï¼ˆä½äºå„è‡ªæ¨¡å—ç›®å½•ï¼‰
../meeting/styles.css      # ä¼šè®®é¡µé¢ï¼ˆç‹¬ç«‹çª—å£ï¼‰
../media/styles.css        # åª’ä½“é¢„è§ˆé¡µé¢ï¼ˆç‹¬ç«‹çª—å£ï¼‰
```

---

## ğŸ—ï¸ æ¶æ„åˆ†å±‚è¯´æ˜

### ç¬¬ä¸€å±‚ï¼šè®¾è®¡ Tokenï¼ˆ`variables.css` + `theme/`ï¼‰

**ä½œç”¨**ï¼šå®šä¹‰å…¨å±€è®¾è®¡ç³»ç»Ÿï¼Œç¡®ä¿è§†è§‰ä¸€è‡´æ€§

| Token ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|-----------|------|------|
| é¢œè‰²ç³»ç»Ÿ | ä¸»é¢˜è‰²ã€æ–‡å­—è‰²ã€åŠŸèƒ½è‰² | `--color-blue-500` |
| é€æ˜åº¦ | ç™½è‰²/è“è‰²å„çº§é€æ˜åº¦ | `--white-alpha-50` |
| åœ†è§’ | ç»Ÿä¸€çš„åœ†è§’å°ºå¯¸ | `--radius-lg` |
| é—´è· | ç»Ÿä¸€çš„é—´è·å°ºå¯¸ | `--space-4` |
| æ¯›ç»ç’ƒ | æ¨¡ç³Šå’Œé¥±å’Œåº¦é…ç½® | `--blur-lg` |
| è¿‡æ¸¡ | åŠ¨ç”»æ—¶é—´å’Œç¼“åŠ¨å‡½æ•° | `--transition-smooth` |
| å­—ä½“ | å­—ä½“å¤§å°å®šä¹‰ | `--text-lg` |

**ä¸»é¢˜ç³»ç»Ÿ (`src/theme/`)**ï¼š

| æ¨¡å— | è¯´æ˜ |
|------|------|
| `types.ts` | ç±»å‹å®šä¹‰ï¼ˆColorScaleã€ThemeConfig ç­‰ï¼‰ |
| `utils.ts` | é¢œè‰²è®¡ç®—å·¥å…·ï¼ˆOKLCH è‰²é˜¶ç”Ÿæˆï¼‰ |
| `presets.ts` | é¢„è®¾ä¸»é¢˜é…ç½®ï¼ˆå¤©è“ã€æ·±æµ·ã€æ£®æ—ã€æ—¥è½ï¼‰ |
| `generator.ts` | ä¸»é¢˜æ•°æ®ç”Ÿæˆå™¨ |
| `store.ts` | Zustand çŠ¶æ€ç®¡ç† + localStorage æŒä¹…åŒ– |
| `ThemeProvider.tsx` | å°†ä¸»é¢˜æ•°æ®åº”ç”¨åˆ° CSS å˜é‡ |
| `ThemeEditor.tsx` | è®¾ç½®é¢æ¿ä¸­çš„ä¸»é¢˜ç¼–è¾‘å™¨ |

**ä½¿ç”¨åŸåˆ™**ï¼š
- æ‰€æœ‰é¢œè‰²å€¼åº”ä¼˜å…ˆä½¿ç”¨å˜é‡
- æ–°å¢é¢œè‰²éœ€å…ˆåœ¨æ­¤æ–‡ä»¶å®šä¹‰
- é€šè¿‡ ThemeProvider è‡ªåŠ¨æ³¨å…¥ä¸»é¢˜ CSS å˜é‡
- æ”¯æŒäº®è‰²/æš—è‰²/è·Ÿéšç³»ç»Ÿæ¨¡å¼
- æ”¯æŒé¢„è®¾ä¸»é¢˜å’Œç”¨æˆ·è‡ªå®šä¹‰é¢œè‰²

---

### ç¬¬äºŒå±‚ï¼šåŸºç¡€æ ·å¼ï¼ˆ`base.css`ï¼‰

**ä½œç”¨**ï¼šå®šä¹‰å…¨å±€å¸ƒå±€å®¹å™¨å’Œè£…é¥°å…ƒç´ 

| æ ·å¼ | è¯´æ˜ |
|------|------|
| `.login-container` | å…¨å±ç™»å½•å®¹å™¨ï¼Œå¤šå±‚æ¸å˜èƒŒæ™¯ |
| `.floating-orb` | æµ®åŠ¨è£…é¥°åœ†ï¼Œå¢å¼ºè§†è§‰å±‚æ¬¡ |
| `@keyframes` | æµ®åŠ¨åŠ¨ç”»å®šä¹‰ |
| `@media` | å“åº”å¼æ–­ç‚¹ |

**è®¾è®¡ç†å¿µ**ï¼š
- ä¸°å¯Œçš„èƒŒæ™¯è‰²å½©è®©æ¯›ç»ç’ƒæ•ˆæœæ›´æ˜æ˜¾
- æµ®åŠ¨è£…é¥°å¢åŠ é¡µé¢åŠ¨æ„Ÿ
- æ‰€æœ‰èƒŒæ™¯å…ƒç´ ä¸å½±å“äº¤äº’ï¼ˆpointer-events: noneï¼‰

---

### ç¬¬ä¸‰å±‚ï¼šç»„ä»¶æ ·å¼ï¼ˆ`components/`ï¼‰

å¯å¤ç”¨çš„ UI ç»„ä»¶ï¼Œéµå¾ªå•ä¸€èŒè´£åŸåˆ™ã€‚

#### `glass-card.css` - æ¯›ç»ç’ƒå¡ç‰‡

| ç±»å | è¯´æ˜ |
|------|------|
| `.glass-card` | åŸºç¡€æ¯›ç»ç’ƒå¡ç‰‡å®¹å™¨ |
| `.auth-card` | è®¤è¯é¡µé¢ä¸“ç”¨å¡ç‰‡ |
| `.auth-form-content` | è¡¨å•å†…å®¹å®¹å™¨ |
| `.account-selector-content` | è´¦å·é€‰æ‹©å™¨å®¹å™¨ |

**æ¯›ç»ç’ƒæ•ˆæœå®ç°**ï¼š
- `backdrop-filter: blur() saturate()` æ¨¡ç³Š + é¥±å’Œåº¦
- å¤šå±‚ `box-shadow` æ¨¡æ‹Ÿç»ç’ƒå…‰æ³½
- `::before` / `::after` ä¼ªå…ƒç´ å¢åŠ é«˜å…‰

---

#### `glass-button.css` - æ¯›ç»ç’ƒæŒ‰é’®

| ç±»å | è¯´æ˜ |
|------|------|
| `.glass-button` | ä¸»è¦æ“ä½œæŒ‰é’® |
| `.button-content` | æŒ‰é’®å†…å®¹ï¼ˆå›¾æ ‡+æ–‡å­—ï¼‰ |

**äº¤äº’çŠ¶æ€**ï¼š
- `:hover` - ä¸Šæµ®ã€æ”¾å¤§ã€å¢å¼ºå‘å…‰
- `:active` - ä¸‹å‹ã€ç¼©å°
- `:disabled` - é™ä½é€æ˜åº¦
- `::after` - æ‚¬åœæ‰«å…‰åŠ¨ç”»

---

#### `glass-input.css` - æ¯›ç»ç’ƒè¾“å…¥æ¡†

| ç±»å | è¯´æ˜ |
|------|------|
| `.form-group` | è¡¨å•ç»„å®¹å™¨ |
| `.form-label` | è¡¨å•æ ‡ç­¾ |
| `.glass-input` | æ¯›ç»ç’ƒè¾“å…¥æ¡† |
| `.input-with-prefix` | å¸¦å‰ç¼€çš„è¾“å…¥æ¡†å®¹å™¨ |
| `.protocol-toggle` | åè®®åˆ‡æ¢æŒ‰é’®ï¼ˆhttp/httpsï¼‰ |
| `.optional-label` | å¯é€‰å­—æ®µæ ‡ç­¾ |

---

#### `wheel-selector.css` - å †å å¡ç‰‡è´¦å·é€‰æ‹©å™¨

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šFramer Motion + è‡ªå®šä¹‰å †å å¸ƒå±€

| ç±»å | è¯´æ˜ |
|------|------|
| `.stack-selector` | é€‰æ‹©å™¨ä¸»å®¹å™¨ |
| `.stack-container` | å¡ç‰‡å †å å®¹å™¨ |
| `.stack-card` | å¡ç‰‡å¤–å±‚åŒ…è£… |
| `.stack-card-prev` | ä¸Šä¸€ä¸ªå¡ç‰‡ |
| `.stack-card-current` | å½“å‰å¡ç‰‡ |
| `.stack-card-next` | ä¸‹ä¸€ä¸ªå¡ç‰‡ |
| `.stack-account-card` | è´¦æˆ·å¡ç‰‡å†…å®¹ |
| `.stack-card-avatar` | å¤´åƒåŒºåŸŸ |
| `.stack-card-info` | ä¿¡æ¯åŒºåŸŸ |
| `.stack-counter` | è®¡æ•°å™¨ |
| `.wheel-actions` | æ“ä½œæŒ‰é’®åŒºåŸŸ |
| `.delete-*` | åˆ é™¤ç›¸å…³æ ·å¼ |

**å †å æ•ˆæœè¯´æ˜**ï¼š
```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â† ä¸Šä¸€ä¸ªå¡ç‰‡ï¼ˆç¼©å° 88%ï¼Œé€æ˜åº¦ 50%ï¼‰
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   å½“å‰é€‰ä¸­å¡ç‰‡    â”‚   â† ä¸»å¡ç‰‡ï¼ˆåŸå§‹å¤§å°ï¼Œå®Œå…¨ä¸é€æ˜ï¼‰
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â† ä¸‹ä¸€ä¸ªå¡ç‰‡ï¼ˆç¼©å° 88%ï¼Œé€æ˜åº¦ 50%ï¼‰
```

**ç‰¹æ€§**ï¼š

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| å †å æ˜¾ç¤º | åŒæ—¶æ˜¾ç¤ºä¸Šã€ä¸­ã€ä¸‹ä¸‰å¼ å¡ç‰‡ |
| æ— é™å¾ªç¯ | 2ä¸ªè´¦æˆ·æ—¶ä¸Šä¸‹æ˜¾ç¤ºåŒä¸€å¼ å¡ç‰‡ |
| æµç•…åŠ¨ç”» | ä½¿ç”¨ Framer Motion spring åŠ¨ç”» |
| é›¶ä¾èµ– | æ— éœ€é¢å¤–è½®æ’­åº“ |

**äº¤äº’æ–¹å¼**ï¼šé¼ æ ‡æ»šè½®ã€ç‚¹å‡»ä¸Šä¸‹å¡ç‰‡åˆ‡æ¢ã€ç‚¹å‡»å½“å‰å¡ç‰‡ç™»å½•

---

#### `loading.css` - åŠ è½½çŠ¶æ€

| ç±»å | è¯´æ˜ |
|------|------|
| `.loading-spinner` | åŠ è½½æŒ‡ç¤ºå™¨å®¹å™¨ |
| `.spinner-icon` | æ—‹è½¬å›¾æ ‡ |
| `.loading-overlay` | å…¨å±åŠ è½½é®ç½© |

---

#### `toast.css` - æç¤ºæ¶ˆæ¯

| ç±»å | è¯´æ˜ |
|------|------|
| `.error-message` | å†…è”é”™è¯¯æç¤º |
| `.error-toast` | æµ®åŠ¨é”™è¯¯æç¤º |

---

### ç¬¬å››å±‚ï¼šé¡µé¢æ ·å¼ï¼ˆ`pages/`ï¼‰

é¡µé¢ç‰¹å®šçš„æ ·å¼ï¼Œä¸åº”è¢«å…¶ä»–é¡µé¢å¤ç”¨ã€‚

#### `auth.css` - è®¤è¯é¡µé¢

| ç±»å | è¯´æ˜ |
|------|------|
| `.login-title` | é¡µé¢ä¸»æ ‡é¢˜ |
| `.login-subtitle` | é¡µé¢å‰¯æ ‡é¢˜ |
| `.icon-wrapper` | é¡¶éƒ¨å›¾æ ‡å®¹å™¨ |
| `.footer-text` | åº•éƒ¨ç‰ˆæƒæ–‡å­— |
| `.back-button` | è¿”å›æŒ‰é’® |
| `.auth-link` | ç™»å½•/æ³¨å†Œåˆ‡æ¢é“¾æ¥ |
| `.step-indicator` | åˆ†æ­¥æŒ‡ç¤ºå™¨ |
| `.step-dot` | æ­¥éª¤åœ†ç‚¹ |
| `.step-container` | æ­¥éª¤å†…å®¹å®¹å™¨ |

---

## ğŸ“ è®¾è®¡è§„èŒƒ

### é¢œè‰²ä½¿ç”¨

```css
/* âœ… æ¨è - ä½¿ç”¨å˜é‡ */
color: var(--color-text-primary);
background: var(--color-blue-500);

/* âŒ é¿å… - ç¡¬ç¼–ç é¢œè‰² */
color: #1e3a5f;
background: #3b82f6;
```

### æ¯›ç»ç’ƒæ•ˆæœæ ‡å‡†é…ç½®

```css
/* æ ‡å‡†æ¯›ç»ç’ƒ */
background: linear-gradient(135deg, 
  rgba(255, 255, 255, 0.35) 0%,
  rgba(255, 255, 255, 0.2) 100%
);
backdrop-filter: blur(24px) saturate(180%);
-webkit-backdrop-filter: blur(24px) saturate(180%);
border: 1.5px solid rgba(255, 255, 255, 0.6);
```

### é˜´å½±å±‚æ¬¡

```css
/* æ ‡å‡†å¤šå±‚é˜´å½± */
box-shadow: 
  0 0 60px rgba(255, 255, 255, 0.5),    /* å¤–å‘å…‰ */
  0 8px 32px rgba(59, 130, 246, 0.1),   /* ä¸»é˜´å½± */
  inset 0 2px 2px rgba(255, 255, 255, 0.8); /* å†…é«˜å…‰ */
```

---

## ğŸ”§ ç»´æŠ¤æŒ‡å—

### æ·»åŠ æ–°ç»„ä»¶

1. åœ¨ `components/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. æ·»åŠ è¯¦ç»†çš„æ–‡ä»¶å¤´æ³¨é‡Š
3. åœ¨ `index.css` ä¸­å¯¼å…¥æ–°æ–‡ä»¶
4. æ›´æ–°æœ¬æ–‡æ¡£

### æ·»åŠ æ–°é¡µé¢æ ·å¼

1. åœ¨ `pages/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. ä»…åŒ…å«è¯¥é¡µé¢ç‰¹æœ‰çš„æ ·å¼
3. é€šç”¨æ ·å¼åº”æå–åˆ° `components/`
4. åœ¨ `index.css` ä¸­å¯¼å…¥

### ä¿®æ”¹è®¾è®¡ Token

1. ä¿®æ”¹ `variables.css` ä¸­çš„å˜é‡å€¼
2. æ‰€æœ‰ä½¿ç”¨è¯¥å˜é‡çš„åœ°æ–¹è‡ªåŠ¨æ›´æ–°
3. æµ‹è¯•æ‰€æœ‰ç›¸å…³ç»„ä»¶çš„æ˜¾ç¤ºæ•ˆæœ

---

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

| æ–‡ä»¶ | è¡Œæ•° | èŒè´£ |
|------|------|------|
| `variables.css` | ~150 | è®¾è®¡ Token |
| `base.css` | ~190 | åŸºç¡€å¸ƒå±€ |
| `glass-card.css` | ~170 | å¡ç‰‡ç»„ä»¶ |
| `glass-button.css` | ~260 | æŒ‰é’®ç»„ä»¶ |
| `glass-input.css` | ~230 | è¾“å…¥æ¡†ç»„ä»¶ |
| `wheel-selector.css` | ~340 | Embla é€‰æ‹©å™¨ï¼ˆå«è¯¦ç»†é…ç½®æ–‡æ¡£ï¼‰ |
| `loading.css` | ~90 | åŠ è½½çŠ¶æ€ |
| `toast.css` | ~120 | æç¤ºæ¶ˆæ¯ |
| `auth.css` | ~250 | è®¤è¯é¡µé¢ |

---

## ğŸ“¦ å¤–éƒ¨ä¾èµ–

| ä¾èµ– | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| `embla-carousel-react` | v8+ | è´¦å·é€‰æ‹©å™¨è½®æ’­æ ¸å¿ƒ |
| `embla-carousel-wheel-gestures` | v8+ | æµç•…çš„æ»šè½®æ§åˆ¶æ’ä»¶ |
| `framer-motion` | - | é¡µé¢è¿‡æ¸¡å’Œå¾®åŠ¨ç”» |

---

## ğŸ¨ è®¾è®¡ç†å¿µ

1. **æ¯›ç»ç’ƒç¾å­¦**ï¼šé€šè¿‡ `backdrop-filter` å’Œå¤šå±‚é˜´å½±å®ç°é«˜è´¨æ„Ÿç»ç’ƒæ•ˆæœ
2. **è“ç™½ä¸»é¢˜**ï¼šæ¸…æ–°ã€ä¸“ä¸šçš„é…è‰²æ–¹æ¡ˆ
3. **æµç•…åŠ¨ç”»**ï¼šEmbla Carousel æä¾›æµç•…çš„æ»šè½®å’Œæ‹–æ‹½ä½“éªŒ
4. **æ— ç¼å¾ªç¯**ï¼šæ— é™å¾ªç¯æ»šåŠ¨ï¼Œæ— éœ€åå‘æ»šåŠ¨å³å¯ç»§ç»­
5. **è½»é‡çº§**ï¼šEmbla ä»… ~5KBï¼Œæ€§èƒ½ä¼˜ç§€
6. **å“åº”å¼**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
7. **å¯ç»´æŠ¤æ€§**ï¼šæ¨¡å—åŒ–æ‹†åˆ†ï¼Œå•ä¸€èŒè´£åŸåˆ™

---

## ğŸ“± ç§»åŠ¨ç«¯æ ·å¼ (`mobile/`)

ç§»åŠ¨ç«¯ä¸“å±æ ·å¼ï¼Œå®ç°ä¸æ¡Œé¢ç«¯åˆ†ç¦»çš„ UI å¸ƒå±€ã€‚

### ç›®å½•ç»“æ„

```
src/styles/mobile/
â”œâ”€â”€ index.css          # ç§»åŠ¨ç«¯æ ·å¼å…¥å£
â”œâ”€â”€ main.css           # ä¸»å®¹å™¨ï¼ˆä½¿ç”¨ 100dvh åŠ¨æ€è§†å£ï¼‰
â”œâ”€â”€ header.css         # é¡¶éƒ¨æ ï¼ˆå«çŠ¶æ€æ å®‰å…¨åŒºåŸŸï¼‰
â”œâ”€â”€ tab-bar.css        # åº•éƒ¨ Tab æ 
â”œâ”€â”€ drawer.css         # æŠ½å±‰ä¾§è¾¹æ 
â”œâ”€â”€ contacts.css       # é€šè®¯å½•/æ¶ˆæ¯åˆ—è¡¨å¡ç‰‡
â””â”€â”€ chat-view.css      # èŠå¤©é¡µé¢
```

### å®‰å…¨åŒºåŸŸé€‚é…

ç§»åŠ¨ç«¯ä½¿ç”¨ `env(safe-area-inset-*)` é€‚é… Android/iOS çŠ¶æ€æ å’Œåº•éƒ¨æ‰‹åŠ¿æ¡ï¼š

| åŒºåŸŸ | CSS å±æ€§ | åº”ç”¨ä½ç½® |
|------|----------|----------|
| é¡¶éƒ¨çŠ¶æ€æ  | `env(safe-area-inset-top)` | `.mobile-header`, `.mobile-chat-header` |
| åº•éƒ¨æ‰‹åŠ¿æ¡ | `env(safe-area-inset-bottom)` | `.mobile-chat-input` |

### èŠå¤©é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  .mobile-chat-header        â”‚ â† padding-top åŒ…å«çŠ¶æ€æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  .mobile-chat-messages      â”‚ â† overflow: hiddenï¼Œå†…éƒ¨ç»„ä»¶ç®¡ç†æ»šåŠ¨
â”‚    â””â”€â”€ .chat-messages-container â”‚ â† height: 100%ï¼Œå®é™…æ»šåŠ¨å®¹å™¨
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  .mobile-chat-input         â”‚ â† padding-bottom åŒ…å«æ‰‹åŠ¿æ¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®è®¾è®¡**ï¼š
- `.mobile-chat-messages` è®¾ç½® `overflow: hidden`ï¼Œä¸åœ¨æ­¤å±‚æ»šåŠ¨
- å†…éƒ¨ `.chat-messages-container` è®¾ç½® `height: 100%`ï¼Œç”± `ChatMessages` ç»„ä»¶ç®¡ç†æ»šåŠ¨
- é¿å…åµŒå¥—æ»šåŠ¨å®¹å™¨å¯¼è‡´çš„ `scrollToBottom()` å¤±æ•ˆé—®é¢˜

### ç§»åŠ¨ç«¯åª’ä½“é¢„è§ˆ

ç”±äºç§»åŠ¨ç«¯ä¸æ”¯æŒ `WebviewWindow` å¤šçª—å£ï¼Œå›¾ç‰‡å’Œè§†é¢‘ä½¿ç”¨å…¨å±æ¨¡æ€æ¡†é¢„è§ˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•³  æ–‡ä»¶å.jpg              â”‚ â† .mobile-media-preview-header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚        [å›¾ç‰‡/è§†é¢‘]           â”‚ â† .mobile-media-preview-content
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ç±»å | è¯´æ˜ |
|------|------|
| `.mobile-media-preview-overlay` | å…¨å±é®ç½©å±‚ |
| `.mobile-media-preview-header` | é¡¶éƒ¨æ ï¼ˆå…³é—­æŒ‰é’®ã€æ–‡ä»¶åï¼‰ |
| `.mobile-media-preview-content` | åª’ä½“å†…å®¹åŒºåŸŸ |
| `.mobile-media-preview-image` | å›¾ç‰‡ï¼ˆæ”¯æŒåŒæŒ‡ç¼©æ”¾ï¼‰ |
| `.mobile-media-preview-video` | è§†é¢‘æ’­æ”¾å™¨ |

### ç§»åŠ¨ç«¯è§†é¢‘æ’­æ”¾

ç”±äº Android WebView æ— æ³•é€šè¿‡ Tauri çš„ `asset://` åè®®æ’­æ”¾æœ¬åœ°è§†é¢‘ï¼ˆå·²çŸ¥é—®é¢˜ [#12019](https://github.com/tauri-apps/tauri/issues/12019)ï¼‰ï¼Œ
é‡‡ç”¨ Rust ç«¯æœ¬åœ° HTTP æœåŠ¡å™¨æ–¹æ¡ˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è§†é¢‘æ’­æ”¾æµç¨‹                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰ç«¯è¯·æ±‚è§†é¢‘ â†’ æ£€æŸ¥æœ¬åœ°ç¼“å­˜                              â”‚
â”‚       â”œâ”€â”€ æœ‰ç¼“å­˜ â†’ ä½¿ç”¨ http://127.0.0.1:9527/video/{hash} â”‚
â”‚       â””â”€â”€ æ— ç¼“å­˜ â†’ ä½¿ç”¨ Presigned URL + åå°ä¸‹è½½          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| æ¨¡å— | è¯´æ˜ |
|------|------|
| `mobile_media_server.rs` | Rust æœ¬åœ° HTTP æœåŠ¡å™¨ï¼Œæ”¯æŒ Range è¯·æ±‚ |
| `get_local_video_url` | Tauri å‘½ä»¤ï¼Œè·å–æœ¬åœ°è§†é¢‘çš„ HTTP URL |
| `getVideoSource()` | å‰ç«¯å‡½æ•°ï¼Œç§»åŠ¨ç«¯è§†é¢‘ä¸“ç”¨ |

**ä¼˜åŠ¿**ï¼š
- æ”¯æŒè§†é¢‘è¿›åº¦æ¡æ‹–åŠ¨ï¼ˆHTTP 206 Partial Contentï¼‰
- æµå¼ä¼ è¾“ï¼Œä½å†…å­˜å ç”¨
- æœ¬åœ°ç¼“å­˜åé›¶æµé‡æ¶ˆè€—

### æ›´æ–°æ—¥å¿—

- 2026-01-22: æ·»åŠ å®‰å…¨åŒºåŸŸé€‚é…ï¼ˆçŠ¶æ€æ ã€åº•éƒ¨æ‰‹åŠ¿æ¡ï¼‰
- 2026-01-22: ä¿®å¤èŠå¤©é¡µé¢æ¶ˆæ¯æ»šåŠ¨é—®é¢˜ï¼ˆç§»é™¤åµŒå¥—æ»šåŠ¨ï¼‰
- 2026-01-22: æ·»åŠ ç§»åŠ¨ç«¯åª’ä½“é¢„è§ˆæ¨¡æ€æ¡†ï¼ˆæ›¿ä»£ WebviewWindowï¼‰
- 2026-01-22: ä¿®å¤ç§»åŠ¨ç«¯ç¾¤èŠæ¶ˆæ¯æ°”æ³¡ä½ç½®/é¢œè‰²æ˜¾ç¤ºé—®é¢˜
- 2026-01-22: ä¿®å¤ç§»åŠ¨ç«¯è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦é—®é¢˜
- 2026-01-23: æ·»åŠ ç§»åŠ¨ç«¯æœ¬åœ°è§†é¢‘æœåŠ¡å™¨ï¼ˆè§£å†³ asset:// è§†é¢‘æ’­æ”¾é—®é¢˜ï¼‰
- 2026-01-23: ç§»åŠ¨ç«¯è§†é¢‘ç¼©ç•¥å›¾æ”¹ç”¨ video å…ƒç´ æ˜¾ç¤ºç¬¬ä¸€å¸§ï¼ˆæ›¿ä»£ç´«è‰²å ä½ç¬¦ï¼‰
- 2026-01-23: æ·»åŠ ç§»åŠ¨ç«¯æ‰‹åŠ¿è¿”å›å¤„ç†ï¼ˆtauri-plugin-mobile-onbackpressed-listenerï¼‰
- 2026-01-23: æ·»åŠ  Android è®¾å¤‡ä¿¡æ¯è·å–ï¼ˆä½¿ç”¨ UUID æ›¿ä»£ MAC åœ°å€ï¼‰
- 2026-01-23: ç§»åŠ¨ç«¯æŠ½å±‰ä¾§è¾¹æ æ”¹ç”¨ç»Ÿä¸€æ¯›ç»ç’ƒæ•ˆæœå˜é‡
- 2026-01-23: ç§»åŠ¨ç«¯æç¤ºéŸ³æ’­æ”¾æ”¹ç”¨æœ¬åœ° HTTP æœåŠ¡å™¨ï¼ˆè§£å†³ asset:// éŸ³é¢‘æ’­æ”¾é—®é¢˜ï¼‰
- 2026-01-23: ç§»åŠ¨ç«¯ä¼šè¯æŒä¹…åŒ–æ”¹ç”¨ tauri-plugin-storeï¼ˆæ— éœ€ç”Ÿç‰©éªŒè¯ï¼Œä¸ QQ/å¾®ä¿¡ ä½“éªŒä¸€è‡´ï¼‰
- 2026-01-23: ç§»åŠ¨ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ï¼ˆè·³è¿‡ window-stateã€Store é™æ€å¯¼å…¥ã€å¹¶è¡ŒåŠ è½½ã€å…ˆæ˜¾ç¤º UI åéªŒè¯ Tokenï¼‰
- 2026-01-23: ç§»åŠ¨ç«¯ä¸ªäººèµ„æ–™å’Œæˆ‘çš„æ–‡ä»¶æ”¹ä¸ºç‹¬ç«‹å…¨å±é¡µé¢ï¼ˆä½¿ç”¨ä¸æŠ½å±‰ä¸€è‡´çš„æ¯›ç»ç’ƒæ•ˆæœï¼‰
- 2026-01-23: ç§»åŠ¨ç«¯è®¾ç½®é¡µé¢ç‹¬ç«‹åŒ–ï¼Œä¿®å¤çŠ¶æ€æ å®‰å…¨åŒºåŸŸ
- 2026-01-23: ç§»åŠ¨ç«¯æ¶ˆæ¯/é€šè®¯å½•å·¦å³æ»‘åŠ¨åˆ‡æ¢
- 2026-01-23: ç§»åŠ¨ç«¯èŠå¤©é¡µé¢è¿›å…¥/é€€å‡ºæ»‘åŠ¨è¿‡æ¸¡
- 2026-01-23: ç§»åŠ¨ç«¯å±€åŸŸç½‘äº’ä¼ é¡µé¢
- 2026-01-23: æ·»åŠ  tauri-plugin-android-fs è§£å†³ content:// URI æ–‡ä»¶è¯»å–é—®é¢˜

---

## ğŸªŸ ç‹¬ç«‹çª—å£æ ·å¼

ç‹¬ç«‹çª—å£æ ·å¼ä½äºå„è‡ªæ¨¡å—ç›®å½•ï¼Œé€šè¿‡ `index.css` ç»Ÿä¸€å¯¼å…¥ã€‚

### `../meeting/styles.css` - ä¼šè®®é¡µé¢

è§†é¢‘ä¼šè®®ç‹¬ç«‹çª—å£æ ·å¼ï¼Œä½¿ç”¨ Tauri WebviewWindow API æ‰“å¼€ã€‚

| ç±»å | è¯´æ˜ |
|------|------|
| `.meeting-page` | ä¼šè®®é¡µé¢ä¸»å®¹å™¨ |
| `.meeting-header` | é¡¶éƒ¨æ§åˆ¶æ  |
| `.meeting-main` | è§†é¢‘ç½‘æ ¼åŒºåŸŸ |
| `.meeting-controls` | åº•éƒ¨æ“ä½œæŒ‰é’® |
| `.participant-video` | å‚ä¸è€…è§†é¢‘æ¡† |
| `.participant-video.speaking` | è¯´è¯ä¸­çŠ¶æ€ï¼ˆç»¿è‰²è¾¹æ¡†ï¼‰ |

### `../media/styles.css` - åª’ä½“é¢„è§ˆé¡µé¢

å›¾ç‰‡å’Œè§†é¢‘ç‹¬ç«‹çª—å£é¢„è§ˆæ ·å¼ï¼Œä½¿ç”¨ Tauri WebviewWindow API æ‰“å¼€ã€‚

| ç±»å | è¯´æ˜ |
|------|------|
| `.media-page` | åª’ä½“é¢„è§ˆé¡µé¢ä¸»å®¹å™¨ |
| `.media-header` | é¡¶éƒ¨å·¥å…·æ ï¼ˆæ–‡ä»¶åã€å¤§å°ã€å…³é—­æŒ‰é’®ï¼‰ |
| `.media-content` | å†…å®¹åŒºåŸŸ |
| `.media-toolbar-extra` | æ‰©å±•å·¥å…·æ ï¼ˆä¸‹è½½æŒ‰é’®ã€æœ¬åœ°æ ‡è¯†ï¼‰ |
| `.media-image-container` | å›¾ç‰‡å®¹å™¨ï¼ˆæ”¯æŒç¼©æ”¾å’Œæ‹–æ‹½ï¼‰ |
| `.media-video-container` | è§†é¢‘å®¹å™¨ |
| `.media-loading` | åŠ è½½çŠ¶æ€ |
| `.media-error` | é”™è¯¯çŠ¶æ€ |
| `.media-local-badge` | æœ¬åœ°æ–‡ä»¶æ ‡è¯† |
| `.media-zoom-indicator` | ç¼©æ”¾æ¯”ä¾‹æŒ‡ç¤ºå™¨ |

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- å›¾ç‰‡æ”¯æŒæ»šè½®ç¼©æ”¾ï¼ˆ0.1x - 10xï¼‰
- å›¾ç‰‡æ”¾å¤§åæ”¯æŒæ‹–æ‹½ç§»åŠ¨
- åŒå‡»é‡ç½®ç¼©æ”¾
- è§†é¢‘è¾¹æ’­è¾¹ç¼“å­˜
- ESC é”®å…³é—­çª—å£
- æœ¬åœ°æ–‡ä»¶ä¼˜å…ˆåŠ è½½

